<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>广东多尼斯网络科技有限公司</title>
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

   <link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="/static/css/font.css">
<link rel="stylesheet" href="/static/css/xadmin.css">
<script type="text/javascript"
	src="/static/js/jquery.min.js"></script>
<script src="/static/lib/layui/layui.js" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/xadmin.js"></script>
<script type="text/javascript" src="/static/js/token.js"></script>
</head>
<body class="login-bg">
    
    <div class="login layui-anim layui-anim-up">
        <div class="message">用户注册</div>
        <div id="darkbannerwrap"></div>
        
        <form method="post" class="layui-form" >
            <input name="username" placeholder="请输入用户名"  type="text" lay-verify="required" class="layui-input" >
            <hr class="hr15">
            <input name="password" lay-verify="required" placeholder="请输入密码"  type="password" class="layui-input">
            <hr class="hr15">
            <input name="password2" lay-verify="required" placeholder="请再次输入密码"  type="password" class="layui-input">
            <hr class="hr15">
            <input value="注册" lay-submit lay-filter="regist" style="width:100%;" type="submit">
            <hr class="hr20" >
        </form>
    </div>

    <script>
        $(function  () {
            layui.use('form', function(){
              var form = layui.form;
              var token=initToken();
				
              form.on('submit(regist)', function(data){
            	  console.log()
            	  if($('input[name="username"]').val().length<6||$('input[name="username"]').val().length>16){
            		  layer.alert('请输入6-16位字符的用户名！',{icon: 2}); 
            	  }
            	  if($('input[name="password"]').val()!=$('input[name="password2"]').val()){
            		 
            		  layer.alert('密码输入不一致，请重新输入',{icon: 2});
            	  }else{
            	  $.ajax({
						url : '/users/regist',
						// data:{},
						type : 'POST',
						data : data.field,
						dataType : 'json',
						beforeSend : function(XMLHttpRequest) {
							XMLHttpRequest.setRequestHeader("x-auth-token",
									token);
						},
						success : function(res) {
							if (res.header.status == 1000) {
								layer.open({
									  title: '提示',
									  content: '注册成功，请联系管理员激活账号！'
									});  
							} else {
								layer.msg(res.header.message, {
									icon : 2,
									time : 2000
								})
							}
						}
					})
					  
            	  }
                return false;
              });
            });
        })

        
    </script>

    

</body>
</html>